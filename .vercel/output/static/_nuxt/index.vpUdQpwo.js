import{b as ne,o as re,_ as ie,c as de,d as ce,e as ue}from"./data.D__ajRMW.js";import H from"./Icon.BEGuH9t7.js";import{E as me,u as pe,c as W,_ as _e,f as X}from"./CustomInput.BcM7CXSE.js";import{f as z,j as Y,m as se,o as r,c as b,n as V,v as fe,a,t as x,q as P,i as M,F as O,r as ae,l as oe,b as t,u as s,_ as G,s as ve,x as K,y as D,z as q,A as ee,g as Z,B as R,h as U,w as o,d as n}from"./entry.BBmPmtTj.js";import{t as be,z as k,_ as le}from"./vee-validate-zod.esm.CWoO79Qf.js";import{_ as xe}from"./BaseButton.B0URLZJq.js";import{u as te}from"./useApiCall.V1gFz3DY.js";import"./index.DKzsDYrr.js";const he={class:"w-full relative pb-1.5"},ge={class:"rounded-[5px] border relative items-center cursor-pointer px-2.5 gap-3"},ye=["value"],Ce={class:"absolute top-1/2 -translate-y-1/2 right-3"},we={key:0,class:"w-full absolute border z-10 top-[50px] left-0 bg-white rounded-[5px] shadow-md"},$e=["onClick"],Ne=z({__name:"CustomSelect",props:["label","icon","placeholder","inputType","modelValue","name"],emits:["update:modelValue","blur"],setup(d,{emit:c}){const f=Y(["Super Admin","Admin","Sales-and-Marketing"]),u=Y(!1),L=()=>{u.value=!u.value},h=c,S=m=>{h("update:modelValue",m),u.value=!1};return(m,$)=>{const N=H,p=se("motion");return r(),b("div",he,[V(a("label",{for:"",class:"text-sm mb-2 inline-block"},x(d.label),513),[[fe,d.label]]),a("div",ge,[a("div",{onClick:L,class:"absolute w-full bg-transparent z-10 h-12 left-0"}),a("div",null,[P(m.$slots,"default",{},void 0,!0)]),a("input",{disabled:"",type:"text",placeholder:"Select role",class:"input cursor-pointer disabled:bg-transparent w-full",value:d.modelValue,onInput:$[0]||($[0]=_=>m.$emit("update:modelValue",_.target.value)),onBlur:$[1]||($[1]=_=>m.$emit("blur"))},null,40,ye),a("span",Ce,[u.value?V((r(),M(N,{key:1,initial:{y:4},enter:{y:0},name:"lucide:chevron-up",color:"gray",size:"18px"},null,512)),[[p]]):V((r(),M(N,{key:0,initial:{y:4},enter:{y:0},name:"lucide:chevron-down",color:"gray",size:"18px"},null,512)),[[p]])]),u.value?V((r(),b("div",we,[(r(!0),b(O,null,ae(f.value,_=>(r(),b("ul",{class:"flex flex-col gap-y-2",key:_},[a("li",{onClick:F=>S(_),class:"border-b hover:bg-gray-100 hover:transition-all p-3.5 cursor-pointer text-sm text-[#041211] border-mt-secondary-50"},x(_),9,$e)]))),128))])),[[p,{initial:{y:5,opacity:0},enter:{y:0,opacity:1}}]]):oe("",!0)]),V(t(s(me),{duration:.5,initial:{opacity:0},enter:{opacity:1},name:d.name,class:"text-red-400 absolute top-[80px] left-0 text-[13px] transition-all"},null,8,["name"]),[[p]])])}}}),Ae=G(Ne,[["__scopeId","data-v-63cf0957"]]),E=ve("globalStore",{state:()=>({openModal:!1,loading:!1,addAdminStatus:!0}),actions:{toggleModal(){this.openModal=!this.openModal}}}),Ve={class:"w-[700px] relative h-fite mx-auto bg-white rounded-[4px] shadow-md px-5 py-10 sm:p-16 space-y-7"},Le=a("h2",{class:"text-center text-[#211658] text-3xl font-medium"},"Add Admin",-1),Se=["onSubmit"],Te={class:"space-y-2 pb-4 md:space-y-3"},ke=z({__name:"AddAdmin",setup(d){const{toggleModal:c}=E(),{loading:f,addAdminStatus:u}=K(E()),L=be(k.object({firstName:k.string({required_error:"First name is required"}),lastName:k.string({required_error:"Last name is required"}),email:k.string({required_error:"Email is required"}).email({message:"Email is invalid"}),password:k.string({required_error:"Password is required"}).min(6,{message:"Password must be at least 6 characters"}),role:k.string({required_error:"Role is required"})})),{defineField:h,handleSubmit:S}=pe({validationSchema:L}),[m,$]=h("firstName"),[N,p]=h("lastName"),[_,F]=h("email"),[i,y]=h("password"),[A,B]=h("role"),I=async C=>{f.value=!0;try{const l=await ee.post("https://api-staging.mealtrips.com/api/admin/admin-users/invite-admin",{firstname:C.firstName,lastname:C.lastName,email:C.email,admin_role:C.role,password:C.password,callBackUrl:"https://api-staging.mealtrips.com/verifyNewAdminEmail"},{headers:Z()});u.value=!1}catch(l){ee.isAxiosError(l)&&l.response?W(l.response.data.message,!1):W("An unexpected error occurred",!1),console.error("Error adding admin:",l)}finally{f.value=!1}};return(C,l)=>{const w=H,T=_e,g=Ae,j=le;return r(),b("div",Ve,[t(w,{onClick:l[0]||(l[0]=v=>s(c)()),role:"button",name:"ci:close-big",color:"#292D32",size:"34px",class:"absolute top-10 right-10 bg-[#A1B1CC] p-1.5 cursor-pointer rounded-full"}),Le,a("form",{onSubmit:s(S)(I),class:"space-y-5 md:space-y-10"},[a("div",Te,[t(T,D({"input-type":"text",modelValue:s(m),"onUpdate:modelValue":l[1]||(l[1]=v=>q(m)?m.value=v:null)},s($),{label:"First Name",name:"firstName"}),null,16,["modelValue"]),t(T,D({"input-type":"text",modelValue:s(N),"onUpdate:modelValue":l[2]||(l[2]=v=>q(N)?N.value=v:null)},s(p),{label:"Last Name",name:"lastName"}),null,16,["modelValue"]),t(T,D({"input-type":"email",modelValue:s(_),"onUpdate:modelValue":l[3]||(l[3]=v=>q(_)?_.value=v:null)},s(F),{label:"Email",name:"email"}),null,16,["modelValue"]),t(g,D({label:"Role",modelValue:s(A),"onUpdate:modelValue":l[4]||(l[4]=v=>q(A)?A.value=v:null)},s(B),{name:"role"}),null,16,["modelValue"]),t(T,D({label:"Password",modelValue:s(i),"onUpdate:modelValue":l[5]||(l[5]=v=>q(i)?i.value=v:null)},s(y),{name:"password","auto-generate":!0}),null,16,["modelValue"])]),t(j,{"load-state":s(f),text:"Create Admin",iconName:"bxl:codepen"},null,8,["load-state"])],40,Se)])}}}),Me={},Ee={width:"90",height:"90",viewBox:"0 0 90 90",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Be=a("path",{d:"M37.7393 5.05597C42.1029 2.01738 47.8971 2.01739 52.2607 5.05597L55.302 7.17373C57.1139 8.43547 59.2234 9.20326 61.4225 9.4014L65.1135 9.73399C70.4094 10.2112 74.848 13.9356 76.2376 19.0682L77.206 22.6454C77.783 24.7766 78.9055 26.7207 80.4627 28.2861L83.0764 30.9134C86.8265 34.6831 87.8327 40.3892 85.598 45.2142L84.0405 48.577C83.1126 50.5805 82.7228 52.7913 82.9095 54.9913L83.2229 58.684C83.6726 63.9823 80.7755 69.0003 75.9622 71.26L72.6075 72.8349C70.6088 73.7732 68.8892 75.2162 67.618 77.0216L65.4845 80.0518C62.4233 84.3996 56.9785 86.3813 51.8388 85.0184L48.2566 84.0686C46.1224 83.5026 43.8776 83.5026 41.7434 84.0686L38.1612 85.0184C33.0215 86.3813 27.5767 84.3996 24.5155 80.0518L22.3819 77.0216C21.1108 75.2162 19.3912 73.7732 17.3925 72.8349L14.0378 71.26C9.22452 69.0003 6.32741 63.9823 6.77709 58.684L7.09049 54.9913C7.27722 52.7913 6.8874 50.5805 5.95948 48.577L4.402 45.2142C2.16731 40.3892 3.17346 34.6831 6.92362 30.9134L9.53732 28.2861C11.0945 26.7207 12.217 24.7766 12.794 22.6454L13.7624 19.0682C15.152 13.9356 19.5906 10.2112 24.8865 9.73399L28.5775 9.4014C30.7766 9.20325 32.8861 8.43547 34.698 7.17373L37.7393 5.05597Z",fill:"#165049"},null,-1),De=a("path",{d:"M56.9594 36.1216C57.4184 36.5556 57.6863 37.154 57.7042 37.7854C57.722 38.4168 57.4884 39.0295 57.0547 39.4887L43.5547 53.7828C43.3359 54.014 43.073 54.1991 42.7814 54.327C42.4899 54.4549 42.1757 54.5231 41.8574 54.5276C41.5391 54.532 41.2231 54.4726 40.9281 54.3529C40.6331 54.2331 40.3651 54.0555 40.14 53.8304L32.9929 46.6834C32.5721 46.2318 32.343 45.6344 32.3539 45.0173C32.3648 44.4001 32.6148 43.8112 33.0513 43.3747C33.4878 42.9382 34.0766 42.6882 34.6938 42.6773C35.311 42.6664 35.9084 42.8955 36.36 43.3163L41.7759 48.729L53.5923 36.2169C54.0263 35.7579 54.6247 35.49 55.2561 35.4721C55.8875 35.4543 56.5002 35.6879 56.9594 36.1216Z",fill:"white"},null,-1),qe=[Be,De];function Pe(d,c){return r(),b("svg",Ee,qe)}const ze=G(Me,[["render",Pe]]),Fe={class:"w-[400px] relative mx-auto bg-white flex flex-col gap-y-6 items-center justify-center text-center rounded-[6px] shadow-md p-10 lg:p-16"},Ie=a("h3",{class:"text-center text-xl font-bold w-full"},"User Created Successfully!",-1),je=a("p",{class:""},"Admin user created successfully! The user will get an email with the account credentials",-1),Re=z({__name:"ModalMessage",setup(d){const{toggleModal:c}=E(),{addAdminStatus:f}=K(E()),u=()=>{c(),f.value=!0};return(L,h)=>{const S=H,m=le;return r(),b("div",Fe,[t(ze),t(S,{onClick:u,role:"button",name:"ci:close-big",color:"#292D32",size:"34px",class:"absolute top-7 right-7 bg-[#A1B1CC] p-1.5 cursor-pointer rounded-full"}),Ie,je,t(m,{onClick:u,class:"w-[250px]",text:"Dashboard",iconName:"bxl:codepen"})])}}}),Ue={class:"h-screen px-6 sm:px-16 bg-mt-secondary-50 w-screen fixed flex justify-center items-center top-0 left-0"},Oe=z({__name:"Modal",emits:["closeModal"],setup(d,{emit:c}){return(f,u)=>(r(),b("div",Ue,[P(f.$slots,"default")]))}}),Ze={class:"uppercase text-[#71717A] text-sm"},He={class:"flex items-end justify-between"},Ge=z({__name:"Card",props:{variant:{type:String,default:"primary"},positive:{type:Boolean,default:!0}},setup(d){return(c,f)=>(r(),b("div",{class:R(["p-7 shadow-md px-8 h-[120px] flex flex-col justify-between custom-radius",[d.variant==="primary"?"bg-[#FCF1E8]":"bg-[#E8EEED]"]])},[a("h2",Ze,[P(c.$slots,"title",{},void 0,!0)]),a("div",He,[a("h3",{class:R(["text-xl font-bold",[d.variant==="primary"?"text-[#DC6F19]":"text-[#165049]"]])},[P(c.$slots,"price",{},void 0,!0)],2),a("div",{class:R(["space-x-1",[d.positive?"text-[#22C55E]":"text-[#CE3131]"]])},[a("span",null,x(d.positive?"+":"-"),1),a("span",null,[P(c.$slots,"statNumber",{},void 0,!0)]),a("span",null,x(d.positive?"↑":"↓"),1)],2)])],2))}}),Ke=G(Ge,[["__scopeId","data-v-15e7b79d"]]),Je={class:"flex flex-wrap justify-between items-center py-4"},Qe={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-5"},We={class:"flex flex-col my-6 rounded shadow-xl shadow-gray-200"},Xe=a("div",{class:"font-bold text-[#393939] p-5"},"Recent Orders",-1),rt={__name:"index",setup(d){const{toggleModal:c}=E(),{openModal:f,addAdminStatus:u}=K(E()),{data:L,pending:h,error:S}=te("/admin/dashboard/overview",{headers:Z()}),{data:m,pending:$,error:N}=te("/admin/orders/all",{headers:Z()}),p=U(()=>{var i;return(i=L.value)==null?void 0:i.data}),_=U(()=>{var i;return(i=m.value)==null?void 0:i.data.data}),F=U(()=>{const i=/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}\.\d{6}Z$/;return _.value.map(y=>{if(i.test(y.order_date)){let A=y.order_date.slice(0,10),B=y.order_date.slice(12,19);return`${A}:${B}`}})});return(i,y)=>{const A=ie,B=ke,I=Re,C=Oe,l=xe,w=Ke,T=de,g=ce,j=ue,v=ne,J=se("motion");return r(),b(O,null,[a("div",Je,[t(A,{"page-title":"Admin Dashboard"}),s(f)?V((r(),M(C,{key:0,initial:{opacity:0,scale:.9},visible:{opacity:1,scale:1}},{default:o(()=>[s(u)?(r(),M(B,{key:0})):V((r(),M(I,{key:1,initial:{opacity:0,scale:.9},visible:{opacity:1,scale:1}},null,512)),[[J]])]),_:1})),[[J]]):oe("",!0),t(l,{onClick:y[0]||(y[0]=e=>s(c)()),class:"bg-text-1 text-white",btnData:{iconName:"ic:round-add",title:"Add Admin"}})]),a("div",Qe,[t(w,{positive:!1},{title:o(()=>[n("Today Sales")]),price:o(()=>{var e;return[n(x((e=s(p))==null?void 0:e.today_sales),1)]}),statNumber:o(()=>[n("36")]),_:1}),t(w,{variant:"secondary"},{title:o(()=>[n("Total Sales")]),price:o(()=>{var e;return[n(x((e=s(p))==null?void 0:e.total_sales),1)]}),statNumber:o(()=>[n("36")]),_:1}),t(w,{positive:!1},{title:o(()=>[n("Total Orders")]),price:o(()=>{var e;return[n(x((e=s(p))==null?void 0:e.orders_count),1)]}),statNumber:o(()=>[n("8")]),_:1}),t(w,{positive:!1},{title:o(()=>[n("customers")]),price:o(()=>{var e;return[n(x((e=s(p))==null?void 0:e.customers_count),1)]}),statNumber:o(()=>[n("36")]),_:1}),t(w,{variant:"secondary"},{title:o(()=>[n("Vendors")]),price:o(()=>{var e;return[n(x((e=s(p))==null?void 0:e.vendors_count),1)]}),statNumber:o(()=>[n("36")]),_:1}),t(w,{positive:!1},{title:o(()=>[n("riders")]),price:o(()=>{var e;return[n(x((e=s(p))==null?void 0:e.riders_count),1)]}),statNumber:o(()=>[n("8")]),_:1})]),a("div",We,[Xe,t(v,{tableTitles:s(re)},{default:o(()=>[(r(!0),b(O,null,ae(s(_),(e,Q)=>(r(),M(j,{key:Q},{default:o(()=>[t(T),t(g,{data:s(F)[Q]},null,8,["data"]),t(g,{data:e.order_number},null,8,["data"]),t(g,{data:e.rider_name?e.rider_name:"N/A"},null,8,["data"]),t(g,{data:e.dispatched_at?("formatTime"in i?i.formatTime:s(X))(e.dispatched_at):"--:--"},null,8,["data"]),t(g,{data:e.completed_at?("formatTime"in i?i.formatTime:s(X))(e.completed_at):"--:--"},null,8,["data"]),t(g,{data:e.distance?e.distance:"00(KM)"},null,8,["data"]),t(g,{data:e.status?e.status:"N/A"},null,8,["data"])]),_:2},1024))),128))]),_:1},8,["tableTitles"])])],64)}}};export{rt as default};
